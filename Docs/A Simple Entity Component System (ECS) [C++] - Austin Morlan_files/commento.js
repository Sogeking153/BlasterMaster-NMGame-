!function(A,l){"use strict";var t,s,i,d="commento",u="commento-main-area",p="commento-login",y="commento-login-box-container",k="commento-login-box",T="commento-login-box-email-subtitle",H="commento-login-box-email-input",g="commento-login-box-password-input",x="commento-login-box-name-input",b="commento-login-box-website-input",C="commento-login-box-email-button",L="commento-login-box-login-link-container",M="commento-login-box-login-link",S="commento-login-box-hr",B="commento-login-box-oauth-pretext",N="commento-login-box-oauth-buttons-container",v="commento-mod-tools",h="commento-mod-tools-lock-button",f="commento-error",a="commento-logged-container",w="commento-comments-area",D="commento-textarea-super-container-",E="commento-textarea-container-",R="commento-textarea-",O="commento-anonymous-checkbox-",I="commento-comment-card-",U="commento-comment-body-",q="commento-comment-text-",P="commento-comment-subtitle-",j="commento-comment-timeago-",W="commento-comment-score-",J="commento-comment-options-",Y="commento-comment-edit-",F="commento-comment-reply-",V="commento-comment-collapse-",X="commento-comment-upvote-",_="commento-comment-downvote-",z="commento-comment-approve-",G="commento-comment-remove-",$="commento-comment-sticky-",K="commento-comment-children-",Q="commento-comment-contents-",Z="commento-comment-name-",ee="commento-submit-button-",oe="commento-markdown-button-",ne="commento-markdown-help-",te="https://commento.austinmorlan.com",ie="https://commento.austinmorlan.com",re=null,me=!1,ae=[],ce={},le=!0,se=!1,de=!1,ue=!1,pe=!1,ve="none",he={},fe={},ge="login",xe=!1,be=void 0,we=null;function ye(e){return l.getElementById(e)}function ke(e,o){e.prepend(o)}function Te(e,o){e.appendChild(o)}function He(e,o){e.parentNode.insertBefore(o,e.nextSibling)}function Ce(e,o){e.classList.add("commento-"+o)}function Le(e,o){null!==e&&e.classList.remove("commento-"+o)}function Me(e){return l.createElement(e)}function Se(e){null!==e&&e.parentNode.removeChild(e)}function r(e,o){var n=e.attributes[o];if(void 0!==n)return n.value}function Be(e){if(null!==e){var o=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(o,e),o}return e}function Ne(e,o,n){e.addEventListener("click",function(){o(n)},!1)}function De(e,o,n){e.setAttribute(o,n)}function Ee(e,o,n){var t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onload=function(){n(JSON.parse(t.response))},t.send(JSON.stringify(o))}function Ae(e){"function"==typeof e&&e()}function c(e,o){var n,t=new Date;t.setTime(t.getTime()+31536e6),n="; expires="+t.toUTCString(),l.cookie=e+"="+o+n+"; path=/"}function Re(){var e=function(e){var o=("; "+l.cookie).split("; "+e+"=");if(2===o.length)return o.pop().split(";").shift()}("commentoCommenterToken");return void 0===e?"anonymous":e}function m(e){ce[e.commenterHex]=e,be=e.commenterHex;var o,n,t=Me("div"),i=Me("div");o="undefined"!==e.link?Me("a"):Me("div");var r=Me("div"),m=Ye(e.commenterHex+"-"+e.name);t.id=a,Ce(t,"logged-container"),Ce(i,"logged-in-as"),Ce(o,"name"),Ce(r,"logout"),o.innerText=e.name,r.innerText="Logout",Ne(r,A.logout),De(t,"style","display: none"),"undefined"!==e.link&&De(o,"href",e.link),"undefined"===e.photo?((n=Me("div")).style.background=m,n.innerHTML=e.name[0].toUpperCase(),Ce(n,"avatar")):(De(n=Me("img"),"src",ie+"/api/commenter/photo?commenterHex="+e.commenterHex),Ce(n,"avatar-img")),Te(i,n),Te(i,o),Te(t,i),Te(t,r),ke(re,t),me=!0}function Oe(o){if("anonymous"===Re())return me=!1,void Ae(o);var e={commenterToken:Re()};Ee(te+"/api/commenter/self",e,function(e){if(!e.success)return c("commentoCommenterToken","anonymous"),void Ae(o);m(e.commenter),A.allShow(),Ae(o)})}function Ie(e,o){var n=Me("link"),t=l.getElementsByTagName("head")[0];n.type="text/css",De(n,"href",e),De(n,"rel","stylesheet"),De(n,"onload",o),Te(t,n)}function Ue(e){var o=ye(f);o.innerText=e,De(o,"style","display: block;")}function qe(){De(ye(f),"style","display: none;")}function Pe(e){var o=ye(D+e),n=ye(oe+e),t=Me("table"),i=Me("tr"),r=Me("td"),m=Me("td"),a=Me("tr"),c=Me("td"),l=Me("td"),s=Me("tr"),d=Me("td"),u=Me("td"),p=Me("tr"),v=Me("td"),h=Me("td"),f=Me("tr"),g=Me("td"),x=Me("td"),b=Me("tr"),w=Me("td"),y=Me("td");t.id=ne+e,Ce(t,"markdown-help"),c.innerHTML="<b>bold</b>",l.innerHTML="surround text with <pre>**two asterisks**</pre>",r.innerHTML="<i>italics</i>",m.innerHTML="surround text with <pre>*asterisks*</pre>",d.innerHTML="<pre>code</pre>",u.innerHTML="surround text with <pre>`backticks`</pre>",v.innerHTML="<strike>strikethrough</strike>",h.innerHTML="surround text with <pre>~~two tilde characters~~</pre>",g.innerHTML='<a href="https://example.com">hyperlink</a>',x.innerHTML="<pre>[hyperlink](https://example.com)</pre> or just a bare URL",w.innerHTML="<blockquote>quote</blockquote>",y.innerHTML="prefix with <pre>&gt;</pre>",Ne(n=Be(n),je,e),Te(i,r),Te(i,m),Te(t,i),Te(a,c),Te(a,l),Te(t,a),Te(f,g),Te(f,x),Te(t,f),Te(s,d),Te(s,u),Te(t,s),Te(p,v),Te(p,h),Te(t,p),Te(b,w),Te(b,y),Te(t,b),Te(o,t)}function je(e){var o=ye(oe+e),n=ye(ne+e);Ne(o=Be(o),Pe,e),Se(n)}function We(e){var o,n=Me("div"),t=Me("div"),i=Me("textarea"),r=Me("div"),m=Me("input"),a=Me("label"),c=Me("button"),l=Me("a");return n.id=D+e,t.id=E+e,i.id=R+e,m.id=O+e,c.id=ee+e,l.id=oe+e,Ce(t,"textarea-container"),Ce(r,"round-check"),Ce(r,"anonymous-checkbox-container"),Ce(c,"button"),Ce(c,"submit-button"),Ce(l,"markdown-button"),Ce(n,"button-margin"),De(i,"placeholder","Add a comment"),De(m,"type","checkbox"),De(a,"for",O+e),a.innerText="Comment anonymously",c.innerText="Add Comment",l.innerHTML="<b>M &#8595;</b> &nbsp; Markdown",i.oninput=(o=i,function(){o.style.height="",o.style.height=Math.min(Math.max(o.scrollHeight,75),400)+"px"}),Ne(c,ze,e),Ne(l,Pe,e),Te(t,i),Te(n,t),Te(r,m),Te(r,a),Te(n,c),le||Te(n,r),Te(n,l),n}function Je(e){var o=Me("div");return Ce(o,"moderation-notice"),o.innerText=e,o}function Ye(e){for(var o=["#396ab1","#da7c30","#3e9651","#cc2529","#922428","#6b4c9a","#535154"],n=0,t=0;t<e.length;t++)n+=e.charCodeAt(t);return o[n%o.length]}function Fe(e){return 1!==e?e+" points":e+" point"}function Ve(B,N){var e=B[N];if(!e||!e.length)return null;e.sort(function(e,o){return e.commentHex===ve?-1/0:o.commentHex===ve?1/0:e.score!==o.score?o.score-e.score:e.creationDate<o.creationDate?-1:1});var D=(new Date).getTime(),E=Me("div");return e.forEach(function(e){var o,n,t,i,r,m=ce[e.commenterHex],a=Me("div"),c=Me("div"),l=Me("div"),s=Me("div"),d=Me("div"),u=Me("div"),p=Me("div"),v=Me("div"),h=Me("button"),f=Me("button"),g=Me("button"),x=Me("button"),b=Me("button"),w=Me("button"),y=Me("button"),k=Me("button"),T=Ve(B,e.commentHex),H=Me("div"),C=Ye(e.commenterHex+"-"+m.name);if(n="undefined"!==m.link&&"https://undefined"!==m.link&&""!==m.link?Me("a"):Me("div"),a.id=I+e.commentHex,u.id=U+e.commentHex,p.id=q+e.commentHex,l.id=P+e.commentHex,s.id=j+e.commentHex,d.id=W+e.commentHex,v.id=J+e.commentHex,h.id=Y+e.commentHex,f.id=F+e.commentHex,g.id=V+e.commentHex,x.id=X+e.commentHex,b.id=_+e.commentHex,w.id=z+e.commentHex,y.id=G+e.commentHex,k.id=$+e.commentHex,T&&(T.id=K+e.commentHex),H.id=Q+e.commentHex,n.id=Z+e.commentHex,g.title="Collapse children",x.title="Upvote",b.title="Downvote",h.title="Edit",f.title="Reply",w.title="Approve",y.title="Remove",ve===e.commentHex?k.title=se?"Unsticky":"This comment has been stickied":k.title="Sticky",s.title=e.creationDate.toString(),a.style.borderLeft="2px solid "+C,n.innerText=m.name,p.innerHTML=e.html,s.innerHTML=(t=D,i=e.creationDate,(r=t-i)<5e3?"just now":r<6e4?Math.round(r/1e3)+" seconds ago":r<36e5?Math.round(r/6e4)+" minutes ago":r<864e5?Math.round(r/36e5)+" hours ago":r<2592e6?Math.round(r/864e5)+" days ago":r<94608e7?Math.round(r/2592e6)+" months ago":Math.round(r/94608e7)+" years ago"),d.innerText=Fe(e.score),"undefined"===m.photo?((o=Me("div")).style.background=C,"anonymous"===e.commenterHex?(o.innerHTML="?",o.style["font-weight"]="bold"):o.innerHTML=m.name[0].toUpperCase(),Ce(o,"avatar")):(De(o=Me("img"),"src",ie+"/api/commenter/photo?commenterHex="+m.commenterHex),Ce(o,"avatar-img")),Ce(a,"card"),se&&"approved"!==e.state&&Ce(a,"dark-card"),m.isModerator&&Ce(n,"moderator"),"flagged"===e.state&&Ce(n,"flagged"),Ce(c,"header"),Ce(n,"name"),Ce(l,"subtitle"),Ce(s,"timeago"),Ce(d,"score"),Ce(u,"body"),Ce(v,"options"),we&&Ce(v,"options-mobile"),Ce(h,"option-button"),Ce(h,"option-edit"),Ce(f,"option-button"),Ce(f,"option-reply"),Ce(g,"option-button"),Ce(g,"option-collapse"),Ce(x,"option-button"),Ce(x,"option-upvote"),Ce(b,"option-button"),Ce(b,"option-downvote"),Ce(w,"option-button"),Ce(w,"option-approve"),Ce(y,"option-button"),Ce(y,"option-remove"),Ce(k,"option-button"),ve===e.commentHex?Ce(k,"option-unsticky"):Ce(k,"option-sticky"),me&&(0<e.direction?Ce(x,"upvoted"):e.direction<0&&Ce(b,"downvoted")),Ne(g,A.commentCollapse,e.commentHex),Ne(w,A.commentApprove,e.commentHex),Ne(y,A.commentDelete,e.commentHex),Ne(k,A.commentSticky,e.commentHex),me){var L=Xe(x,b,e.commentHex,e.direction);x=L[0],b=L[1]}else Ne(x,A.loginBoxShow,null),Ne(b,A.loginBoxShow,null);Ne(f,A.replyShow,e.commentHex),"undefined"!==m.link&&"https://undefined"!==m.link&&""!==m.link&&De(n,"href",m.link),Te(v,g),Te(v,b),Te(v,x),Te(v,f),se?("root"===N&&Te(v,k),Te(v,y),"approved"!==e.state&&Te(v,w)):ve===e.commentHex&&Te(v,k),De(v,"style","width: "+32*(v.childNodes.length+1)+"px;");for(var M=0;M<v.childNodes.length;M++)De(v.childNodes[M],"style","right: "+32*M+"px;");if(Te(l,d),Te(l,s),we||Te(c,v),Te(c,o),Te(c,n),Te(c,l),Te(u,p),Te(H,u),we){Te(H,v);var S=Me("div");Ce(S,"options-clearfix"),Te(H,S)}T&&(Ce(T,"body"),Te(H,T)),Te(a,c),Te(a,H),Te(E,a)}),E}function Xe(e,o,n,t){return e=Be(e),o=Be(o),0<t?(Ne(e,A.vote,[n,[1,0]]),Ne(o,A.vote,[n,[1,-1]])):t<0?(Ne(e,A.vote,[n,[-1,1]]),Ne(o,A.vote,[n,[-1,0]])):(Ne(e,A.vote,[n,[0,1]]),Ne(o,A.vote,[n,[0,-1]])),[e,o]}function _e(e){me?A.commentNew(e,Re()):A.loginBoxShow(e)}function ze(e){if(le)_e(e);else{var o,n=ye(O+e),t=ye(R+e);if(""!==t.value)return Le(t,"red-border"),n.checked?(o=e,ue=!0,void A.commentNew(o,"anonymous")):void _e(e);else Ce(t,"red-border")}}function o(e){ye(d).innerHTML="",he={},A.main(e)}function Ge(e,o,n){Ee(te+"/api/commenter/login",{email:e,password:o},function(e){if(!e.success)return A.loginBoxClose(),void Ue(e.message);qe(),c("commentoCommenterToken",e.commenterToken),m(e.commenter),A.allShow(),Se(ye(p)),null!==n?A.commentNew(n,e.commenterToken,function(){A.loginBoxClose()}):A.loginBoxClose()})}function n(o){var e={isLocked:pe,stickyCommentHex:ve},n={commenterToken:Re(),domain:parent.location.host,path:parent.location.pathname,attributes:e};Ee(te+"/api/page/update",n,function(e){e.success?(qe(),Ae(o)):Ue(e.message)})}function e(){for(var e,o=(e="script",l.getElementsByTagName(e)),n=0;n<o.length;n++)o[n].src.match(/\/js\/commento\.js$/)&&(t=r(o[n],"data-css-override"),i=r(o[n],"data-auto-init"),void 0===(d=r(o[n],"data-id-root"))&&(d="commento"),s=r(o[n],"data-no-fonts"))}A.logout=function(){c("commentoCommenterToken","anonymous"),o()},A.commentNew=function(i,r,m){var a=ye(D+i),c=ye(R+i),l=ye(F+i),s=c.value;if(""!==s){Le(c,"red-border");var e={commenterToken:r,domain:parent.location.host,path:parent.location.pathname,parentHex:i,markdown:s};Ee(te+"/api/comment/new",e,function(e){if(e.success){qe();var o="";"unapproved"===e.state?o="Your comment is under moderation.":"flagged"===e.state&&(o="Your comment was flagged as spam and is under moderation."),""!==o&&ke(ye(D+i),Je(o));var n=be;void 0!==n&&"anonymous"!==r||(n="anonymous");var t=Ve({root:[{commentHex:e.commentHex,commenterHex:n,markdown:s,html:e.html,parentHex:"root",score:0,state:"approved",direction:0,creationDate:new Date}]},"root");"root"!==i?(a.replaceWith(t),he[i]=!1,Ce(l,"option-reply"),Le(l,"option-cancel"),l.title="Reply to this comment",Ne(l,A.replyShow,i)):(c.value="",He(a,t)),Ae(m)}else Ue(e.message)})}else Ce(c,"red-border")},A.commentApprove=function(i){var e={commenterToken:Re(),commentHex:i};Ee(te+"/api/comment/approve",e,function(e){if(e.success){qe();var o=ye(I+i),n=ye(Z+i),t=ye(z+i);Le(o,"dark-card"),Le(n,"flagged"),Se(t)}else Ue(e.message)})},A.commentDelete=function(o){var e={commenterToken:Re(),commentHex:o};Ee(te+"/api/comment/delete",e,function(e){e.success?(qe(),Se(ye(I+o))):Ue(e.message)})},A.vote=function(e){var o=e[0],n=e[1][0],t=e[1][1],i=ye(X+o),r=ye(_+o),m=ye(W+o),a={commenterToken:Re(),commentHex:o,direction:t},c=Xe(i,r,o,t);i=c[0],r=c[1],Le(i,"upvoted"),Le(r,"downvoted"),0<t?Ce(i,"upvoted"):t<0&&Ce(r,"downvoted"),m.innerText=Fe(parseInt(m.innerText.replace(/[^\d-.]/g,""))+t-n),Ee(te+"/api/comment/vote",a,function(e){if(!e.success)return Ue(e.message),Le(i,"upvoted"),Le(r,"downvoted"),m.innerText=Fe(parseInt(m.innerText.replace(/[^\d-.]/g,""))-t+n),void Xe(i,r,o,n);qe()})},A.replyShow=function(e){if(!(e in he&&he[e])){He(ye(q+e),We(e)),he[e]=!0;var o=ye(F+e);Le(o,"option-reply"),Ce(o,"option-cancel"),o.title="Cancel reply",Ne(o=Be(o),A.replyCollapse,e)}},A.replyCollapse=function(e){var o=ye(F+e);ye(D+e).remove(),he[e]=!1,Ce(o,"option-reply"),Le(o,"option-cancel"),o.title="Reply to this comment",Ne(o=Be(o),A.replyShow,e)},A.commentCollapse=function(e){var o=ye(K+e),n=ye(V+e);o&&Ce(o,"hidden"),Le(n,"option-collapse"),Ce(n,"option-uncollapse"),n.title="Expand children",Ne(n=Be(n),A.commentUncollapse,e)},A.commentUncollapse=function(e){var o=ye(K+e),n=ye(V+e);o&&Le(o,"hidden"),Le(n,"option-uncollapse"),Ce(n,"option-collapse"),n.title="Collapse children",Ne(n=Be(n),A.commentCollapse,e)},A.commentoAuth=function(e){var o,n,t,i=e.provider,r=e.id,m=window.open("","_blank");o=te+"/api/commenter/token/new",n=function(o){if(o.success){qe(),c("commentoCommenterToken",o.commenterToken),m.location=te+"/api/oauth/"+i+"/redirect?commenterToken="+o.commenterToken;var e=setInterval(function(){m.closed&&(clearInterval(e),Oe(function(){var e=ye(a);e&&De(e,"style",""),Se(ye(p)),null!==r?A.commentNew(r,o.commenterToken,function(){A.loginBoxClose()}):A.loginBoxClose()}))},250)}else Ue(o.message)},(t=new XMLHttpRequest).open("GET",o,!0),t.onload=function(){n(JSON.parse(t.response))},t.send(null)},A.popupRender=function(n){var e=ye(y),o=Me("div"),t=Me("div"),i=Me("div"),r=Me("div"),m=Me("hr"),a=Me("div"),c=Me("div"),l=Me("div"),s=Me("hr"),d=Me("div"),u=Me("div"),p=Me("div"),v=Me("input"),h=Me("button"),f=Me("div"),g=Me("a"),x=Me("div");o.id=k,d.id=T,v.id=H,h.id=C,g.id=M,f.id=L,s.id=S,a.id=B,c.id=N,Ce(e,"login-box-container"),Ce(o,"login-box"),Ce(d,"login-box-subtitle"),Ce(u,"email-container"),Ce(p,"email"),Ce(v,"input"),Ce(h,"email-button"),Ce(f,"login-link-container"),Ce(g,"login-link"),Ce(t,"login-box-subtitle"),Ce(i,"oauth-buttons-container"),Ce(r,"oauth-buttons"),Ce(a,"login-box-subtitle"),Ce(c,"oauth-buttons-container"),Ce(l,"oauth-buttons"),Ce(x,"login-box-close"),Ce(re,"root-min-height"),g.innerText="Don't have an account? Sign up.",d.innerText="Login with your email address",h.innerText="Continue",a.innerText="Proceed with social login",t.innerText="Proceed with "+parent.location.host+" authentication",Ne(h,A.passwordAsk,n),Ne(g,A.popupSwitch),Ne(x,A.loginBoxClose),De(e,"style","display: none; opacity: 0;"),De(v,"name","email"),De(v,"placeholder","Email address"),De(v,"type","text");var b=0;if(["google","twitter","github","gitlab"].forEach(function(e){if(fe[e]){var o=Me("button");Ce(o,"button"),Ce(o,e+"-button"),o.innerText=e,Ne(o,A.commentoAuth,{provider:e,id:n}),Te(l,o),b++}}),fe.sso){var w=Me("button");Ce(w,"button"),Ce(w,"sso-button"),w.innerText="Login with Single Sign-On",Ne(w,A.commentoAuth,{provider:"sso",id:n}),Te(r,w),Te(i,r),Te(o,t),Te(o,i),(0<b||fe.commento)&&Te(o,m)}xe=0<b&&(Te(o,a),Te(c,l),Te(o,c),!0),Te(p,v),Te(p,h),Te(u,p),Te(f,g),0<b&&fe.commento&&Te(o,s),fe.commento&&(Te(o,d),Te(o,u),Te(o,f)),Te(o,x),ge="login",e.innerHTML="",Te(e,o)},A.popupSwitch=function(){var e=ye(T),o=ye(M);ge="login"===ge?(o.innerText="Already have an account? Log in.",e.innerText="Create an account","signup"):(o.innerText="Don't have an account? Sign up.",e.innerText="Login with your email address","login")},A.login=function(e){var o=ye(H),n=ye(g);Ge(o.value,n.value,e)},A.signup=function(o){var n=ye(H),e=ye(x),t=ye(b),i=ye(g),r={email:n.value,name:e.value,website:t.value,password:i.value};Ee(te+"/api/commenter/new",r,function(e){if(!e.success)return A.loginBoxClose(),void Ue(e.message);qe(),Ge(n.value,i.value,o)})},A.passwordAsk=function(e){var o,n,t,i,r=ye(k),m=ye(T),a=ye(C),c=ye(L),l=ye(S),s=ye(N),d=ye(B);Se(a),Se(c),xe&&0<fe.length&&(Se(l),Se(d),Se(s)),i="signup"===ge?(o=["name","website","password"],n=[x,b,g],t=["text","text","password"],["Real Name","Website (Optional)","Password"]):(o=["password"],n=[g],t=["password"],["Password"]),m.innerText="signup"===ge?"Finish the rest of your profile to complete.":"Enter your password to log in.";for(var u=0;u<o.length;u++){var p=Me("div"),v=Me("div"),h=Me("input");if(h.id=n[u],Ce(p,"email-container"),Ce(v,"email"),Ce(h,"input"),De(h,"name",o[u]),De(h,"type",t[u]),De(h,"placeholder",i[u]),Te(v,h),Te(p,v),"password"===o[u]){var f=Me("button");Ce(f,"email-button"),f.innerText=ge,Ne(f,"signup"===ge?A.signup:A.login,e),Te(v,f)}Te(r,p)}"signup"===ge?ye(x).focus():ye(g).focus()},A.threadLockToggle=function(){var e=ye(h);pe=!pe,e.disabled=!0,n(function(){e.disabled=!1,o()})},A.commentSticky=function(o){if("none"!==ve){var e=ye($+ve);Le(e,"option-unsticky"),Ce(e,"option-sticky")}ve=ve===o?"none":o,n(function(){var e=ye($+o);ve===o?(Le(e,"option-sticky"),Ce(e,"option-unsticky")):(Le(e,"option-unsticky"),Ce(e,"option-sticky"))})},A.loadCssOverride=function(){void 0===t?A.allShow():Ie(t,"window.commento.allShow()")},A.allShow=function(){var e=ye(u),o=ye(v),n=ye(a);De(e,"style",""),se&&De(o,"style",""),n&&De(n,"style","")},A.loginBoxClose=function(){var e=ye(u),o=ye(y);Le(e,"blurred"),Le(re,"root-min-height"),De(o,"style","display: none")},A.loginBoxShow=function(e){var o=ye(u),n=ye(y);A.popupRender(e),Ce(o,"blurred"),De(n,"style",""),window.location.hash=y,ye(H).focus()};var $e=!(A.main=function(a){if(null!==(re=ye(d))){var e,o,n;null===we&&(we=re.getBoundingClientRect().width<450),Ce(re,"root"),(e=Me("div")).id=y,Te(re,e),(o=Me("div")).id=f,Ce(o,"error-box"),De(o,"style","display: none;"),Te(re,o),(n=Me("div")).id=u,Ce(n,"main-area"),De(n,"style","display: none"),Te(re,n);var t,i,r,m,c=(t=Me("div"),i=Me("div"),r=Me("a"),m=Me("span"),t.id="commento-footer",Ce(t,"footer"),Ce(i,"logo-container"),Ce(r,"logo"),Ce(m,"logo-text"),De(r,"href","https://commento.io"),De(r,"target","_blank"),m.innerText="Commento",Te(r,m),Te(i,r),Te(t,i),t);Ie(ie+"/css/commento.css","window.commento.loadCssOverride()"),"true"!==s&&Ce(re,"root-font"),Oe(function(){var o,e;o=function(){var e,o,n,t,i,r,m;e=Me("div"),o=Me("button"),e.id=v,o.id=h,Ce(e,"mod-tools"),o.innerHTML=pe?"Unlock Thread":"Lock Thread",Ne(o,A.threadLockToggle),De(e,"style","display: none"),Te(e,o),Te(re,e),n=function(){!function(){var o,n={},e=ye(w);ae.forEach(function(e){(o=e.parentHex)in n||(n[o]=[]),e.creationDate=new Date(e.creationDate),n[o].push(e)});var t=Ve(n,"root");t&&Te(e,t)}(),Te(re,c),function(){if(window.location.hash)if(window.location.hash.startsWith("#commento-")){var e=ye(I+window.location.hash.split("-")[1]);if(null===e)return;Ce(e,"highlighted-card"),e.scrollIntoView(!0)}else window.location.hash.startsWith("#commento")&&re.scrollIntoView(!0)}(),A.allShow(),function(){for(var e=l.getElementsByClassName("commento-name"),o=0;o<e.length;o++)De(e[o],"style","max-width: "+(e[o].getBoundingClientRect().width+20)+"px;")}(),Ae(a)},t=Me("div"),i=Me("div"),r=ye(u),m=Me("div"),t.id=p,m.id=w,Ce(t,"login"),Ce(i,"login-text"),Ce(m,"comments"),i.innerText="Login",m.innerHTML="",Ne(i,A.loginBoxShow,null),Te(t,i),pe||de?me||ue?(Te(r,Je("This thread is locked. You cannot add new comments.")),Se(ye(p))):(Te(r,t),Te(r,We("root"))):(me?Se(ye(p)):Te(r,t),Te(r,We("root"))),Te(r,m),Te(re,r),Ae(n)},e={commenterToken:Re(),domain:parent.location.host,path:parent.location.pathname},Ee(te+"/api/comment/list",e,function(e){e.success?(qe(),le=e.requireIdentification,se=e.isModerator,de=e.isFrozen,pe=e.attributes.isLocked,ve=e.attributes.stickyCommentHex,ae=e.comments,ce=Object.assign({},ce,e.commenters),fe=e.configuredOauths,Ae(o)):Ue(e.message)})})}else console.log("[commento] error: no root element with ID '"+d+"' found")});function Ke(){$e||($e=!0,e(),"true"===i||void 0===i?A.main(void 0):"false"!==i&&console.log("[commento] error: invalid value for data-auto-init; allowed values: true, false"))}var Qe=function(){var e=l.readyState;"loading"===e?l.addEventListener("readystatechange",Qe):"interactive"===e?Ke():"complete"===e&&Ke()};Qe()}(window.commento,document);